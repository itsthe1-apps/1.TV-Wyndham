var restrntOrderList=null;var requestedTime=0;var selectedTime="00:00";var requestedDateDiff=0;var requestedDateDate=null;var requestedGuest=0;function restrntOrderEventHandler(d){var c=true;switch(d.code){case"INIT_SCREEN":initRestOrderVars();restrntOrderInitScreen(d.args);break;case"UNINIT_SCREEN":restrntOrderUninitScreen();break;default:switch(top.State.getState()){case top.State.RESTRNT_ORDER:c=restrntOrderMainEventHandler(d);break;default:c=false;break}break}return c}function restrntOrderMainEventHandler(d){var c=true;switch(d.code){case"KEY_LEFT":if(restrntOrderList.getItem().target=="time"&&requestedTime>0){requestedTime--;top.Time.setTime(requestedTime);if(document.getElementById("orderTime")){selectedTime=top.Time.getSelectedTime();document.getElementById("orderTime").innerHTML=selectedTime}}else{if(restrntOrderList.getItem().target=="guest"&&requestedGuest>0){requestedGuest--;if(document.getElementById("orderGuest")){document.getElementById("orderGuest").innerHTML=requestedGuest}}else{if(restrntOrderList.getItem().target=="date"&&requestedDateDiff>0){requestedDateDiff--;if(document.getElementById("orderDate")){document.getElementById("orderDate").innerHTML=top.Clock.addDays(requestedDateDiff,"dd - M - yyyy")}}}}break;case"KEY_RIGHT":if(restrntOrderList.getItem().target=="time"&&top.Time.getMaxIndex()>requestedTime){requestedTime++;top.Time.setTime(requestedTime);if(document.getElementById("orderTime")){selectedTime=top.Time.getSelectedTime();document.getElementById("orderTime").innerHTML=selectedTime}}else{if(restrntOrderList.getItem().target=="guest"&&requestedGuest<100){requestedGuest++;if(document.getElementById("orderGuest")){document.getElementById("orderGuest").innerHTML=requestedGuest}}else{if(restrntOrderList.getItem().target=="date"&&requestedDateDiff<100){requestedDateDiff++;if(document.getElementById("orderDate")){document.getElementById("orderDate").innerHTML=top.Clock.addDays(requestedDateDiff,"dd - M - yyyy")}}}}break;case"KEY_UP":restrntOrderList.scrollUp(1);setTextValues();break;case"KEY_DOWN":restrntOrderList.scrollDown(1);setTextValues();break;case"KEY_BACK":top.ScreenManager.load("RESTRNT");break;case"KEY_SELECT":if(restrntOrderList.getItem().target=="submit"&&requestedGuest>0){top.RestuarantsManager.setOrderRequest(top.RestuarantsManager.getCurrentRestuarantMenu().id,selectedTime,requestedDateDiff,requestedGuest);document.getElementById("restrntOrdermsg").innerHTML="Thank You. Your Order will be processed."}else{document.getElementById("restrntOrdermsg").innerHTML="Enter requered order information.."}break;default:c=false;break}return c}function restrntOrderInitScreen(b){top.State.setState(top.State.RESTRNT_ORDER);top.ScreenManager.displayScreen(restrntOrderGetScreenHtml());top.Clock.show(this,"globalClock");restrntOrderInitMainList();top.Time.init()}function restrntOrderUninitScreen(){top.Clock.stop();setToBinRestOrder()}function restrntOrderInitMainList(){try{var b=[];restrntOrderList=new top.List(top.ListType.SCROLL,restOrderListData(),0,0,0,9,document.getElementById("restrntOrderListContainer"));restrntOrderList.displayItem=restrntOrderListDisplayItem;restrntOrderList.initList()}catch(c){x=c}}function restOrderListData(){var a=[];a.push({"class":"orderTime",target:"time"});a.push({"class":"orderDate",target:"date"});a.push({"class":"orderGuest",target:"guest"});a.push({"class":"orderSubmit",target:"submit"});return a}function setTextValues(){document.getElementById("orderGuest").innerHTML=requestedGuest;document.getElementById("orderTime").innerHTML=top.Time.getSelectedTime();document.getElementById("orderDate").innerHTML=top.Clock.addDays(requestedDateDiff,"dd - M - yyyy")}function setToBinRestOrder(){restrntOrderList=null;delete restrntOrderList;restrntOrderList=undefined;selectedTime=null;delete selectedTime;selectedTime=undefined;requestedTime=null;delete requestedTime;requestedTime=undefined;requestedDateDiff=null;delete requestedDateDiff;requestedDateDiff=undefined;requestedDateDate=null;delete requestedDateDate;requestedDateDate=undefined;requestedGuest=null;delete requestedGuest;requestedGuest=undefined}function initRestOrderVars(){restrntOrderList=null;requestedTime=0;requestedDateDiff=0;requestedDateDate=null;requestedGuest=0;selectedTime="00:00"};