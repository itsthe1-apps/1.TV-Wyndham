var MoviesManager={movieLoaded:false,categoriesArray:[],moviesArray:[],alphabetMoviesArray:[],isNewData:true,init:function(b){},loadFlag:function(b){top.kwUtils.kwXMLHttpRequest("GET",top.MOVIES_CATURL,true,this,this.getCategories)},getCategories:function(a){try{this.categoriesArray=(typeof a==="object")?a:eval(a);this.isNewData=true;this.loadInitMovies(null)}catch(e){top.kwConsole.print("MOVIECAT_LOAD_ERROR")}},loadInitMovies:function(b){b=b?b:0;var a=top.MOVIES_URL+b+"/format/json";top.kwUtils.kwXMLHttpRequest("GET",a,true,this,this.getInitMovies)},getInitMovies:function(a){try{a=(typeof a==="object")?a:eval(a);var r=[];for(var d=0;d<a.length;d++){var c=new top.Movie(a[d].name,a[d].description,a[d].id,a[d].duration,a[d].mrl,a[d].mrl_trailer,a[d].logo,a[d].thumbnail);r.push(c)}this.moviesArray=r;this.alphabetMoviesArray=this.moviesArray;top.kwConsole.print("MOVIES_LOADED")}catch(e){top.kwConsole.print("MOVIES_LOAD_ERROR")}},loadMovies:function(b){b=b?b:0;var a=top.MOVIES_URL+b+"/format/json";top.kwUtils.kwXMLHttpRequest("GET",a,true,this,this.getMovies)},getMovies:function(a){try{a=(typeof a==="object")?a:eval(a);var r=[];for(var d=0;d<a.length;d++){var c=new top.Movie(a[d].name,a[d].description,a[d].id,a[d].duration,a[d].mrl,a[d].mrl_trailer,a[d].logo,a[d].thumbnail);r.push(c)}this.moviesArray=r;top.ScreenManager.load("VOD_LIST",{type:"genre",genreId:top.DEFAULT_CHANNEL_CATEGORY})}catch(e){top.kwConsole.print("MOVIES_LOAD_ERROR")}},getCategoriesData:function(){return this.categoriesArray},getCategoryById:function(c){for(var d=0;d<this.categoriesArray.length;d++){if(this.categoriesArray[d].id==c){return this.categoriesArray[d]}}return null},getMovieListByCategory:function(f){var d=[];if(!f){d=this.moviesArray}else{for(var e=0;e<this.moviesArray.length;e++){if(this.moviesArray[e].category==f){d.push(this.moviesArray[e])}}}return d},getMovieListByLetter:function(b,d){var g=[];for(i in b){var e=new RegExp("\\b"+d+"\\w*\\b","i");var f=b[i].name.replace(/[\. ,:-]+/g,"");if(f.match(e)){keywordIndex=i;g.push(b[i])}}this.moviesArray=g},clearMovieList:function(){this.movieLoaded=false;this.moviesArray=null;this.moviesArray=[];this.moviesArray.display=function(){}}};