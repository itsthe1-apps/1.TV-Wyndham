var StreamManager={currentAudio:null,currentSubtitle:null,currentSubtitleState:"off",audioList:[],subtitleList:[],init:function(){},updateStream:function(){this.updateAudio();this.updateSubtitle()},updateAudio:function(){this.audioList=top.Player.getAudioList();this.currentAudio=this.getAudioById(top.Player.getCurrentAudio());top.kwTrace("StreamManager.updateAudio() :: "+top.kwUtils.kwSerialize(this.audioList)+", current "+top.kwUtils.kwSerialize(this.currentAudio))},updateSubtitle:function(){this.subtitleList=top.Player.getSubtitleList();if(this.subtitleList&&this.subtitleList.length>0){this.subtitleList.push({id:"off",language:"off"})}this.currentSubtitle=this.getSubtitleById(top.Player.getCurrentSubtitle());top.kwTrace("StreamManager.updateSubtitle() :: "+top.kwUtils.kwSerialize(this.subtitleList)+", current "+top.kwUtils.kwSerialize(this.currentSubtitle))},nextAudio:function(){var c=new top.Iterator(0,0,this.audioList.length,true);if(this.currentAudio){for(var d=0;d<this.audioList.length;d++){c.increaseIndex();if(this.audioList[d].id==this.currentAudio.id){this.currentAudio=this.audioList[c.getIndex()];top.Player.setCurrentAudio(this.currentAudio.id);return true}}}this.currentAudio=this.audioList[0];top.Player.setCurrentAudio(this.currentAudio.id);return true},getAudioById:function(c){for(var d=0;d<this.audioList.length;d++){if(this.audioList[d].id==c){return this.audioList[d]}}return null},nextSubtitle:function(){var c=new top.Iterator(0,0,this.subtitleList.length,true);if(this.currentSubtitle){for(var d=0;d<this.subtitleList.length;d++){c.increaseIndex();if(this.subtitleList[d].id==this.currentSubtitle.id){this.currentSubtitle=this.subtitleList[c.getIndex()];top.Player.setCurrentSubtitle(this.currentSubtitle.id);return true}}}if(this.subtitleList&&this.subtitleList[0]){this.currentSubtitle=this.subtitleList[0];top.Player.setCurrentSubtitle(this.currentSubtitle.id)}return true},getSubtitleById:function(c){c=c==0?"off":c;for(var d=0;d<this.subtitleList.length;d++){if(this.subtitleList[d].id==c){return this.subtitleList[d]}}return null},hideSubtitles:function(){top.Player.setCurrentSubtitle("off")},showSubtitles:function(){if(this.currentSubtitle){top.Player.setCurrentSubtitle(this.currentSubtitle.id)}}};